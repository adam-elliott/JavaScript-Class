<!DOCTYPE html>
<html lang="en-US">
<head>
 <meta charset="UTF-8">
 <title>A sample page</title>
 <script src="helper.js"></script>
</head>
<body>
 <div id="main">

 </div>
 <script>
// Define user object constructor
function User(name, birthday, password, email) {
	this.name = name;
	this.birthday = birthday;
	this.password = password;
	this.email = email;                        
}

// Define user object parameters		
function createUser(){
	// Get name
	let userName = prompt("What is your first name?");
	
	// Get birthday
	let userBirthday = getBirthday();
	
	// Get email
	let userEmail = getEmail();
	
	// Get password
	let userPass = getPassword();
	
	//Create user
	let user = new User(userName, userBirthday, userPass, userEmail);
	echo("Successfully created account for: " + " Username: " + user.name + "," + " Birthday: " + user.birthday + "," + " E-mail: "  + user.email + "," + " Password: " + user.password + ".")
}

createUser();


// User Account Logic
function getBirthday() {
	let userBirthday = new Date();
	let getBirthmonth = prompt("What is your birth month? MM");
	userBirthday.setMonth((getBirthmonth -1));
	userBirthday.setDate(prompt("What is your birth day? DD"));
	userBirthday.setYear(prompt("What is your birth year? YYYY"));
	
	verifyAge(userBirthday);

	function verifyAge(userBirthday) {
		let today = new Date();
		var ynew = today.getFullYear();
		var mnew = today.getMonth();
		var dnew = today.getDate();
		var yold = userBirthday.getFullYear();
		var mold = userBirthday.getMonth();
		var dold = userBirthday.getDate();
		var diff = ynew - yold;
		if (mold > mnew) diff--;
		else { if (mold == mnew) {
			if (dold > dnew) diff--;
			}
		}
		if (diff < 13 ) {
			alert('To register one must be 13 years or older.');
		} else {
			return userBirthday;
}
}
}

function getEmail() {
	let userEmail1 = prompt("What is your e-mail address?");
	if (userEmail1.search('@') != -1) {
			return userEmail1;
	} else {
		alert("Your e-mail address is not valid, please try again.")
		getEmail();
}
}
	
function getPassword() {
	let userPassword = prompt("Choose a password");
	let userPassword2 = prompt("Re-enter password");
	if (userPassword == userPassword2) {
			return userPassword;
	} else {
			alert("Your passwords did not match. Please try again.");
			getPassword();
	}
}
 </script>
</body>
</html>
